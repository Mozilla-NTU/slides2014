<!DOCTYPE HTML>
<html>
<head>
	<title>Hello WebSocket</title>
</head>
<body>

	<input type="text" id="msg">
	<button id="send">Send</button>
	<div id="output">...</div>

	<script>

		//create a WebSocket instance and start connecting to the server
		client = new WebSocket('ws://localhost:3001');

		//when connected
		client.onopen = function(){
			console.log('connected');
			output.innerText = 'Connected :)';
		}

		//when message is received from the server
		client.onmessage = function(event){
			console.log('receive:', event.data);
		}

		client.onclose = function(){
			console.warn('disconnected');
		}

		//query the elements
		var input = document.getElementById('msg'),
			output = document.getElementById('output'),
			button = document.getElementById('send');

		//when click on the button, send the message to server
		button.addEventListener('click', function(){
			if(input.value){
				client.send(JSON.stringify({
  					from: "Oscar",
  					type: "text",
  					content: input.value,
				}));

				input.value = '';
			}
		});

	</script>

</body>
</html>